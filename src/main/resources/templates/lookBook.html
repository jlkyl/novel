<!DOCTYPE html>
<!-- saved from url=(0079)https://read.qidian.com/chapter/kG2U-blsbgxrNWkNCb7tfg2/zE9d0gl49v76ItTi_ILQ7A2 -->
<html class="loaded"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


    <title>江派书城_章节阅读</title>
    <meta name="description" content="洪荒之神棍开山祖最新章节阅读，洪荒之神棍开山祖是一部仙侠小说,由星之煌创作,起点提供首发更新。第二百五十九章 此子不可留！(2018.07.31)">
    <meta name="keywords" content="洪荒之神棍开山祖,最新,最新章节,仙侠小说,阅读">
    <meta name="robots" content="all">
    <meta name="googlebot" content="all">
    <meta name="baiduspider" content="all">
    <meta http-equiv="mobile-agent" content="format=wml; url=http://m.qidian.com/book/1012730372/421353404">
    <meta http-equiv="mobile-agent" content="format=xhtml; url=http://m.qidian.com/book/1012730372/421353404">
    <meta http-equiv="mobile-agent" content="format=html5; url=http://m.qidian.com/book/1012730372/421353404">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <script src="../css/stats.js.下载" name="MTAH5" sid="500451537"></script>
    <script src="../css/push.js.下载"></script>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/sunburst.css">
    <link rel="stylesheet" href="../css/style.css" />
    <script src="../js/sweet-alert.js"></script>
    <link rel="stylesheet" href="../css/sweet-alert.css">
    <link rel="stylesheet" data-ignore="true" href="../css/icon.css">
    <style type="text/css">
        body{
            background: url("../css/1000.jpg") center 0 no-repeat;
        }
    </style>
    <script>
        // 获取cookie
        function getCookie(name) {
            var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
            arr = document.cookie.match(reg);
            if (arr){
                return arr[2];
            }else {
                return null;
            }
        }
        // tf = 1 用户选择，留在PC
        if (getCookie('tf') != 1) {
            if(/Android|Windows Phone|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)){
                window.location.href="//m.qidian.com/book/1012730372/421353404";
            }
        }else{
            // M站设置了一年，这里fixed
            setCookie('tf', 1, 'qidian.com', '/', 0);
        }
    </script>
    <script>
        var speedTimer = [],
            speedZero = new Date().getTime();
    </script>

    <script>
        //遇到cookie tf=1的话留在本站，否则跳转移动站
        if (getCookie('tf') != 1) {
            //判断是以下设备后跳转到m站
            if (navigator.userAgent.match(/(iPhone|iPod|Android)/i)) {
                location.href = "//m.qidian.com"
            }
        }else {
            // M站设置了一年，这里fixed
            setCookie('tf', 1, 'qidian.com', '/', 0);
        }
        // start 防劫持
        //设置cookie
        function setCookie(name, value, domain, path, expires) {
            if(expires){
                expires = new Date(+new Date() + expires);
            }
            var tempcookie = name + '=' + escape(value) +
                ((expires) ? '; expires=' + expires.toGMTString() : '') +
                ((path) ? '; path=' + path : '') +
                ((domain) ? '; domain=' + domain : '');
            //Ensure the cookie's size is under the limitation
            if(tempcookie.length < 4096) {
                document.cookie = tempcookie;
            }
        }
        //获取cookie
        function getCookie(name) {
            var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
            if (arr = document.cookie.match(reg))
                return (arr[2]);
            else
                return null;
        }
        //创建并发送请求
        function createSender(url){
            var img = new Image();
            img.onload = img.onerror = function(){
                img = null;
            };
            img.src = url;
        };
    </script>


    <link rel="stylesheet" data-ignore="true" href="../css/vote_popup.3844d.css">

    <link charset="utf-8" rel="stylesheet" href="../css/Panel.css">
    <link charset="utf-8" rel="stylesheet" href="../css/LightTip.css">
    <link charset="utf-8" rel="stylesheet" href="../css/Popup.css">
    <link charset="utf-8" rel="stylesheet" href="../css/Drag.css">
    <style name="lbf-overlay">.lbf-overlay { position:fixed; top:0; left:0;}</style>
    <script src="../js/jquery-3.3.1.js"></script>
</head>
<body class="theme-0 " style="zoom: 1;" oncontextmenu="return false">

<div class="share-img">
    <img src="../css/300" width="300" height="300">
</div>
<div class="wrap">

    <div class="read-header" id="readHeader" data-l1="40">
        <div class="wrap-center cf">
            <div class="left-nav fl">
                <div class="logo">
                    <a class="logo-ico" href="javascript:"></a>
                </div>
            </div>
            <div class="read-login fr">
                <ul>

                    <li class="line"></li>
                    <li th:class="${session.users} ? 'sign-out hidden' : 'sign-out'">
                        <a id="pin-login" href="../login.html" target="_blank">登录</a>
                        <a class="reg" href="../register.html" target="_blank">注册</a>
                    </li>
                    <th:block th:if="${session}">
                        <th:block th:if="${session.users}">
                            <li th:class="${session.users[0] } ? 'sign-in' : 'sign-in hidden'">
                                <a href="../personal.html" target="_blank">
                                    <span id = "uuid" style="display: none" th:text="${session.users[0].uuid}"></span>
                                    <i id="nav-user-name" th:text="${session.users[0].uname}"></i>
                                    <span></span>
                                </a>
                                <div class="dropdown">
                                    <a href="/jpbook/topup" target="_blank">充值</a>
                                    <a href="../personal.html" target="_blank">个人中心</a>
                                    <a id="exit" href="javascript:void(0);" onclick="removeu()">退出</a>
                                </div>
                            </li>
                        </th:block>
                    </th:block>

                    <li class="line"></li>
                    <li class="book-shelf" id="top-book-shelf">
                        <a th:href="${session.users} ? '../topup.html' : '../login.html'" target="_blank">
                            充值
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div id="j_bodyRecWrap" class="hidden" style="display: block;">
        <div class="body-rec-wrap" style="background: url(//qidian.qpic.cn/qidian_common/349573/148cca82a4edd8c4cf83e15e13a1633a/0) center 0 no-repeat;" data-l1="3">
            <div class="body-rec-mask">
                <div class="left-rec-box fl" id="j_leftRecBox"><a href="http://cpgame.qd.game.qidian.com/Home/Index/directLogin/name/hyzj/way/1?qd_game_key=hyzj1920x1057jt&amp;qd_dd_p1=2330" target="_blank" data-eid="qd_R120" data-qd_dd_p1="1"></a></div>
                <div class="right-rec-box fr" id="j_rightRecBox"> <a href="http://cpgame.qd.game.qidian.com/Home/Index/directLogin/name/hyzj/way/1?qd_game_key=hyzj1920x1057jt&amp;qd_dd_p1=2330" target="_blank" data-eid="qd_R120" data-qd_dd_p1="1"></a></div>
            </div>
        </div></div>
    <div class="crumbs-nav" data-l1="1">
        <a href="/jpbook/booktype/queryAll" data-eid="qd_G01">首页</a>
        <em class="iconfont icon-xiayige"></em>
        <a th:href="@{/showAllBook.html?btid={filename}(filename=${ibc[0].btid})}" target="_blank" th:text="|${ibc[0].btname}频道|"></a>
        <em class="iconfont icon-xiayige"></em>
        <a th:href="@{/showAllBook.html?btid={filename}(filename=${ibc[0].bookid})}" th:text="${ibc[0].bookname}">人皇在上</a>
    </div>

    <div class="read-main-wrap font-family01" style="font-size:18px" id="j_readMainWrap">
        <div id="j_chapterBox" data-l1="3" style="background-color: #e0ce9e;">


            <div class="text-wrap" id="j_textWrap" data-cid="421353404">
                <div class="read-container">
                    <div class="book-cover-wrap">
                        <div class="book-photo" style="border: #3D495F 1px solid;">
                            <img  th:src="@{/img/{filename}(filename=${ibc[0].icon})}">
                        </div>
                        <h1  th:text="${ibc[0].bookname}"></h1>

                        <h2><a href="https://me.qidian.com/authorIndex.aspx?id=7322536" target="_blank" th:text="${ibc[0].pen}">星之煌</a>著</h2>

                        <div class="info-list cf">
                            <ul>
                                <li><p th:text="${ibc[0].btname}"></p><span>类型</span></li>
                                <li><p>江派书城</p><span>欢饮您</span></li>
                                <li><p><em  th:text="${ibc[0].count}"></em></p><span>连载（字）</span></li>
                            </ul>
                        </div>
                        <h3>与书友共同开启《<span th:text="${ibc[0].bookname}"></span>》的<span th:text="${ibc[0].btname}"></span>之旅</h3>



                        <h5>本书由江派书城进行电子制作与发行</h5>

                        <h6>©版权所有 侵权必究</h6>
                    </div>
                </div>
            </div>

            <input type="hidden" id="bookid" th:value="${ibc[0].bookid}">
            <input type="hidden" id="chapid" th:value="${ibc[0].chapid}">
            <input type="hidden" id="nextchapid" th:value="${ibc[0].nextchapid}">
            <input type="hidden" id="afterchapid" th:value="${ibc[0].afterchapid}">
            <div class="text-wrap" id="chapter-421353404" data-cid="421353404" data-purl="//read.qidian.com/chapter/kG2U-blsbgxrNWkNCb7tfg2/zRT-cZrK1vP6ItTi_ILQ7A2" data-nurl="//read.qidian.com/chapter/kG2U-blsbgxrNWkNCb7tfg2/4m2dCiasT_z4p8iEw--PPw2" data-info="0|433970504|421507489|0|0">
                <div class="main-text-wrap">
                    <div class="text-head">
                        <div class="guide-box">
                            <cite></cite>
                            <p>点击书签前，可收藏每个章节的书签，“阅读进度”可以在个人中心书架里查看</p>
                        </div>
                        <a class="book-mark" href="javascript:" title="书签" data-cid="421353404" data-bid="1012730372" data-auid="7322536" data-eid="qd_R104"></a>
                        <h3 class="j_chapterName" id="showchapname"></h3>
                        <div class="text-info cf">
                            <div class="info fl">
                                <a href="https://book.qidian.com/info/1012730372" target="_blank" data-bid="1012730372" data-auid="7322536" data-eid="qd_R102" th:text="${ibc[0].bookname}"><em class="iconfont"></em></a>

                                <a href="https://me.qidian.com/authorIndex.aspx?id=7322536" target="_blank" data-bid="1012730372" data-auid="7322536" data-eid="qd_R103" th:text="${ibc[0].pen}"><em class="iconfont"></em>星之煌</a>

                                <i><em class="iconfont"></em><span class="j_chapterWordCut" id="showchapcount">2003</span>字</i>
                                <i><em class="iconfont"></em><span class="j_updateTime" id="showupdatetime">2018.07.31 18:07</span></i>
                            </div>
                            <!-- end 评论列表 -->
                        </div>
                    </div>
                    <!--小说显示-->
                    <div class="read-content j_readContent" id="bookcontent" style="font-family: YaHei;">
                    </div>
                    <!--购买-->
                    <div class="vip-limit-wrap">
                        <h3 class="lang"><i>这是VIP章节</i>需要订阅后才能阅读</h3>
                        <div class="subscribe-btn-wrap dib-wrap ">
                            <a class="all j_subscribeBtn " data-soa="1" href="javascript:subbuyrecord(0)" data-eid="qd_R112"><em>全部订阅</em><span><i>5175</i>起点币</span><cite>订阅章节：共<s class="j_chapterNum">475</s>章</cite></a>
                            <a class="single j_subscribeBtn" data-soa="0" data-uid="175" href="javascript:subbuyrecord(0)" data-eid="qd_R113"><em>订阅本章</em><span><i>16</i>起点币</span></a>
                        </div>
                    </div>

                    <div class="admire-wrap">
                        <a class="report-btn j_reportBtn" href="javascript:" data-eid="qd_R106"><em class="iconfont"></em>举报</a>
                        <div class="read-btn-box">
                            <a class="admire lang j_admireBtn" href="javascript:rewardClick()" data-showtype="3" data-eid="qd_R105">赞赏<span class="j_admireNum"></span></a>
                        </div>
                        <dl class="user-active cf">
                        </dl>
                    </div>
                    <script type="text/javascript">

                        function rloadmoney() {
                            $.ajax({
                                url:"/jpbook/chapter/getBookAllMoney",
                                data:{"bookid":$("#bookid").val()},
                                success:function (data) {
                                    $(".vip-limit-wrap").find(".all").find("i").html(data.money);
                                    $(".vip-limit-wrap").find(".all").find("s").html(data.count);
                                    $(".vip-limit-wrap").find(".all").prop("href","javascript:subbuyrecord("+data.money+",'all')");

                                }
                            })
                            $.ajax({
                                url:"/jpbook/buyrecord/getByChapidAndUuid",
                                data:{"chapid":$("#chapid").val()},
                                success:function (data) {
                                    $(".vip-limit-wrap").find(".single").find("i").html(data);
                                    $(".vip-limit-wrap").find(".single").prop("href","javascript:subbuyrecord("+data+",'single')");
                                }
                            })
                        }
                    </script>
                </div>
            </div><!-- start 顶部随机广告 -->

            <!-- end 顶部随机广告 -->
        </div>

        <div class="chapter-control dib-wrap" data-l1="3">

            <a id="j_chapterPrev"  data-eid="qd_R109" >上一章</a><span>|</span>
            <a href="javascript:void(0)" target="_blank" data-eid="qd_R108"></a><span>|</span>
            <a id="j_chapterNext"  data-eid="qd_R109" >下一章</a>
        </div>

        <div class="la-ball-pulse j_chapterLoad hidden">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {

        read($("#chapid").val());
    })
    function read(chapid) {
        $("#chapid").val(chapid);
        rloadmoney();
        $.ajax({
            url:"/jpbook/chapter/getChapContent",
            data:{"chapid":chapid},
            success:function (data) {
                $("#j_textWrap").css("display",data[0].afterchapid==-1?"block":"none");
                $("#j_chapterPrev").prop("href",data[0].afterchapid==-1?"javascript:void(0)":"javascript:read("+data[0].afterchapid+")");
                $("#j_chapterNext").prop("href",data[0].nextchapid==-1?"javascript:void(0)":"javascript:read("+data[0].nextchapid+")");
                $("#showchapname").html(data[0].chapname);
                $("#showchapcount").html(data[0].chapcount);
                $("#showupdatetime").html(jsonDateFormat(data[0].updatetime));
                var str="";
                var chapmoney=parseInt($(".vip-limit-wrap").find(".single").find("i").html());
                if (chapmoney==0){
                    $(".vip-limit-wrap").css("display","none");
                    $(".admire-wrap").css("display","block");
                    for (var i=0;i<data[1].length;i++){
                        str+="<p>　　"+data[1][i]+"</p>";
                    }
                }else{
                    $(".vip-limit-wrap").css("display","block");
                    $(".admire-wrap").css("display","none");
                    for (var i=0;i<data[1].length && i<2;i++){
                        str+="<p>　　"+data[1][i]+"</p>";
                    }
                }
                $("#bookcontent").html(str);
                $("#j_floatWrap").find("dd").find(".catalog").css("display","none");
                $("#j_floatWrap").find("dd").css("background-color","");
                $("#j_floatWrap").find("dd").prop("class","");
                scroll(0,0);
            }
        })
    }
    function jsonDateFormat(date) {//json日期格式转换为正常格式
        var dateee = new Date(date).toJSON();
        return new Date(+new Date(dateee) + 8 * 3600 * 1000).toISOString().replace(/T/g, ' ').replace(/\.[\d]{3}Z/, '')
    }
</script>
<div class="float-wrap" id="j_floatWrap" data-l1="2">
    <div class="left-bar-list" id="j_leftBarList" style="top: 19px;">
        <dl>
            <dd id="j_navCatalogBtn"  data-eid="qd_R42">
                <a href="javascript:void(0)"  onclick="navigation(this)" id="mulu"><i><span class="icon icon-mulu"></span><br><span>目录</span></i></a>
                <div class="guide-box">
                    <cite></cite>
                    目录
                </div>
                <script type="text/javascript">
                    function navigation(obj) {
                       var dis=$(obj).parent("dd").find(".panel-wrap").css("display");
                        $("#j_floatWrap").find("dd").find(".panel-wrap").css("display","none");
                        $("#j_floatWrap").find("dd").css("background-color","");
                        $("#j_floatWrap").find("dd").prop("class","");
                        if(dis=="none"){
                            $(obj).parent("dd").find(".panel-wrap").css("display","block");
                            $(obj).parent("dd").css("background-color","white");
                            $(obj).parent("dd").prop("class","act");
                        }else {
                            $(obj).parent(".sent").find(".panel-wrap").css("display","none");
                            $(obj).parent(".sent").prop("background-color","");
                            $(obj).parent(".sent").prop("class","");
                        }

                    }
                </script>
                <div class="panel-wrap catalog" id="" style="visibility:visible;position: absolute; display: none;z-index: 999999;background-color: white;">

                    <div class="panel-box">
                        <!-- start 目录书签切换按钮 -->
                        <div class="catalog-tab dib-wrap" id="j_catalogTab">
                            <span class="lang act">目录</span>
                        </div>
                        <!-- end 目录书签切换 -->

                        <!-- start 目录书签切换容器-->
                        <div id="j_catalogTabWrap">
                            <!-- start 目录列表 -->
                            <div class="panel-list-wrap catalog-scroll-wrap" id="j_catalogListWrap" style="max-height: 213px; display: block;"><div class="catalog-list-wrap">
                            </div>
                            </div>
                            <!-- end 目录列表 -->
                        </div>
                        <!-- end 目录书签切换容器-->
                    </div>
                </div>
                <script type="text/javascript">
                    $.ajax({
                        url: "/jpbook/roll/queryAllCatalog",
                        data:{"bookid":$("#bookid").val()},
                        success: function (data) {
                            var str="";
                            for(var i=0;i<data.length;i++){
                                str+="<h2 style='margin-left: 50px;font-size:20px;font-weight: bold' class=\"cur\" onclick=\"mulutab(this)\"><b>"+data[i].rollname+"</b></h2>";
                                str+="<div class=\"volume-list\" style=\"margin-left:50px;display: block;\">\n" +
                                    "                                        <ul>\n" +
                                    "\n";
                                for(var j=0;j<data[i].chapterList.length;j++){

                                    str+="                                        <li id=\"nav-chapter-429592402\" style='font-size: 10px; margin-bottom: -100px; display: inline-block;width: 30%'>\n" +
                                        "                                        \n" +
                                        "                                    <a href=\"javascript:read("+data[i].chapterList[j].chapid+")\" style='width: 33%;text-align: center'>"+data[i].chapterList[j].chapname+"</a>\n" +
                                        "                                    </li>\n";
                                }
                                str+="\n" +
                                    "                                    </ul>\n" +
                                    "                                    </div>";
                            }
                            $("#j_catalogListWrap").html(str);
                        }
                    })
                    function mulutab(obj) {
                        $(obj).next().toggle();
                    }
                </script>
            </dd>
            <dd id="j_navSettingBtn" >
                <a href="javascript:void(0)"  onclick="navigation(this)" id="shezhi"><i><em class="icon icon-shezhi"></em><br><span>设置</span></i></a>
                <div class="guide-box">
                    <cite></cite>
                    设置
                </div>
                <div class="panel-wrap setting" id="j_setting"  style="visibility:visible;position: absolute; display: none;z-index: 999999;background-color: white;">
                    <div class="panel-box">
                        <h4 class="lang">设置</h4>
                        <div class="setting-list-wrap">
                            <ul>
                                <li class="theme-list" id="j_themeList">
                                    <i>背景颜色</i>
                                    <input type="hidden" id="setcolor">
                                    <span data-eid="white" title="默认"  style="background-color: white" data-stc="0" data-st="0"><em class="iconfont"></em></span>

                                    <span data-eid="#e0ce9e" title="牛皮纸"  style="background-color: #e0ce9e" class="act" data-stc="8" data-st="1"><em class="iconfont"></em></span>

                                    <span data-eid="black" title="黑色" style="background-color: black" data-stc="7" data-st="6"><em class="iconfont"></em></span>

                                </li>
                                <script type="text/javascript">
                                    $("#j_themeList").find("span").click(function () {
                                        $("#j_themeList").find("span").prop("class","");
                                        $(this).prop("class","act");
                                        $("#j_chapterBox").css("background-color",$(this).css("background-color"));
                                        $("#setcolor").val($(this).attr("data-eid"));
                                        if($(this).css("background-color")=="rgb(0, 0, 0)"){
                                            $("#j_chapterBox").css("color","white");
                                        }else{
                                            $("#j_chapterBox").css("color","black");
                                        }
                                    })
                                </script>
                                <li class="font-family" id="j_fontFamily"><i>正文字体</i>
                                    <input type="hidden" id="setfont">
                                    <span data-st="0" class="yahei act" data-eid="YaHei">雅黑</span>

                                    <span data-st="1" class="yahei" data-eid="SimSun">宋体</span>

                                    <span data-st="2" class="yahei"  data-eid="Kaiti">楷书</span>

                                </li>
                                <script type="text/javascript">
                                    $("#j_fontFamily").find("span").click(function () {
                                        $("#j_fontFamily").find("span").prop("class","yahei");
                                        $(this).prop("class","yahei act");
                                        $("#bookcontent").css("font-family",$(this).attr("data-eid"));
                                        $("#setfont").val($(this).attr("data-eid"));
                                    })
                                </script>
                                <li class="font-size" id="j_fontSize"><i>字体大小</i>

                                    <cite>
                                        <span class="prev"><em class="iconfont"></em></span><b></b>
                                        <span class="lang">18</span><b></b>
                                        <span class="next"><em class="iconfont"></em></span>
                                    </cite>
                                </li>
                                <script type="text/javascript">
                                    $("#j_fontSize").find(".prev").click(function () {
                                        if($("#j_fontSize").find(".lang").html()>=16){
                                            $("#j_fontSize").find(".lang").html($("#j_fontSize").find(".lang").html()-1);
                                        }
                                        $("#bookcontent").css("font-size",$("#j_fontSize").find(".lang").html()+"px");
                                    })
                                    $("#j_fontSize").find(".next").click(function () {
                                        if($("#j_fontSize").find(".lang").html()<=24){
                                            $("#j_fontSize").find(".lang").html($("#j_fontSize").find(".lang").html()-1+2);
                                        }
                                        $("#bookcontent").css("font-size",$("#j_fontSize").find(".lang").html()+"px");
                                    })
                                </script>
                            </ul>
                            <div class="btn-wrap dib-wrap">
                                <a class="red-btn" id="j_setSave" href="javascript:upSetting()" style="margin-left:50px;float: left;">保存</a>
                                <a class="grey-btn" id="j_setCancel" style="margin-left:50px;float: left;" href="javascript:callSetting()">取消</a>
                            </div>
                            <script type="text/javascript">
                                function upSetting() {
                                    $.ajax({
                                        url:"/jpbook/setting/upSetting",
                                        data:{"setcolor":$("#setcolor").val(),
                                            "setfont":$("#setfont").val(),
                                            "setfontsize":$("#j_fontSize").find(".lang").html()},
                                        success:function (data) {
                                            navigation($("#j_navSettingBtn").find("a"));
                                        }
                                    })
                                }
                                function callSetting() {
                                    navigation($("#j_navSettingBtn").find("a"));
                                    getSetting();
                                }
                            </script>
                        </div>
                    </div>
                </div>
            </dd>
            <dd data-eid="qd_R84">
                <a class="add-book" th:href="${ibc[0].brid==-1}?'javascript:addBookrack()':'javascript:void(0)'" data-bookid="1012730372"><i><em class="icon icon-book_icon"></em><br><span th:text="${ibc[0].brid==-1}?'加入书架':'已在书架'" id="bookrackset">书架</span></i></a>
                <div class="guide-box">
                    <cite></cite>
                    加入书架
                </div>
                <script type="text/javascript">
                    function addBookrack() {
                        $.ajax({
                            url: "/jpbook/bookrack/add",
                            data:{"bookid":$("#bookid").val()},
                            success: function (data) {
                                if (data==-1){
                                    window.location.href="/jpbook/login";
                                }else{
                                    $(".add-book").prop("href","javascript:void(0)");
                                    $("#bookrackset").html("已在书架");
                                    swal("加入成功", "已加入书架", "success");
                                }

                            }
                        })
                    }
                </script>
                <script type="text/javascript">
                    $(function () {
                        getSetting();
                    })
                    function getSetting() {
                        $.ajax({
                            url:"/jpbook/setting/getSetting",
                            success:function (data) {
                                $("#j_chapterBox").css("background-color",data.setcolor);
                                $("#setcolor").val(data.setcolor);
                                if($("#j_chapterBox").css("background-color")=="rgb(0, 0, 0)"){
                                    $("#j_chapterBox").css("color","white");
                                }else{
                                    $("#j_chapterBox").css("color","black");
                                }
                                $("#j_themeList").find("span").prop("class","");
                                var spans=$("#j_themeList").find("span");
                                for (var i=0;i<spans.length;i++){
                                    if($(spans[i]).attr("data-eid")==data.setcolor){
                                        $(spans[i]).prop("class","act");
                                    }
                                }
                                $("#j_fontFamily").find("span").prop("class","yahei");
                                spans=$("#j_fontFamily").find("span");
                                for (var i=0;i<spans.length;i++){
                                    if($(spans[i]).attr("data-eid")==data.setfont){
                                        $(spans[i]).prop("class","yahei act");
                                    }
                                }
                                $("#setfont").val(data.setfont);
                                $("#bookcontent").css("font-family",data.setfont);
                                $("#j_fontSize").find(".lang").html(data.setfontsize);
                                $("#bookcontent").css("font-size",data.setfontsize+"px");
                            }
                        })
                    }

                </script>
            </dd>
            <dd data-eid="qd_R85">
                <a th:href="|/jpbook/books/queryBookById?bookid=${ibc[0].bookid}|" target="_blank"><i><em class="icon icon-yemian"></em><br><span>书页</span></i></a>
                <div class="guide-box">
                    <cite></cite>
                    返回书页
                </div>
            </dd>

        </dl>
    </div>
    <div class="right-bar-list" id="j_rightBarList" style="bottom: 0px;">
        <dl>
            <dd id="navReward" data-showtype="3" data-aid="qd_R87">
                <a href="javascript:rewardClick()"><i><em class="icon icon-dashang"></em><br><span>打赏</span></i></a>
                <div class="guide-box">
                    <cite></cite>
                    打赏
                </div>
            </dd>
            <dd id="navTicket" data-showtype="2" data-aid="qd_R88">
                <a href="javascript:recClick()"><i><em class="icon icon-toupiao"></em><br><span>投票</span></i></a>
                <div class="guide-box">
                    <cite></cite>
                    投票
                </div>
            </dd>
            <dd class="go-top" id="j_goTop" title="返回顶部" data-eid="qd_R90" style="display: block;">
                <a href="#top" id="toTop"><i><em class="iconfont"></em></i></a>
            </dd>

        </dl>
    </div>
</div>
<div id="userLevel" class="hidden">0</div>
<div id="authorId" data-authorid="7322536" class="hidden"></div>

<!--投票投票弹框-->
<script type="text/javascript">
    function closePanel() {
        $(".lbf-panel").css("display", "none");
        $(".lbf-overlay").css("display", "none");
    }
</script>
<!--投票投币弹框-->
<script type="text/javascript">
    function closePanel() {
        $(".lbf-panel").css("display", "none");
        $(".lbf-overlay").css("display", "none");
    }
</script>
<!--投票投币弹框-->
<div class="lbf-panel"
     style="position:fixed;z-index: 62780; width: 520px; top: 65px; left: 432px;display: none;"><a
        href="javascript:closePanel();"
        class="lbf-panel-close lbf-icon lbf-icon-close"></a>
    <div class="lbf-panel-head" style="display: none;">提示</div>
    <div class="lbf-panel-body">
        <div class="vote-popup" id="votePopup" data-l1="15">
            <!-- start 弹窗切换tab-->
            <div class="popup-tab" id="popupTab">
                <!-- EJS注释，如果作品是非VIP，看不到投月票Tab -->

                <a class="lang" href="javascript:monthClick()" id="monthTab">投月票<em></em></a>

                <a class="lang act" href="javascript:recClick()" id="recTab">投推荐票<em></em></a>

                <a class="lang" href="javascript:rewardClick()" id="rewardTab">打赏</a>

            </div>
            <!-- end 弹窗切换tab-->
            <script type="text/javascript">
                function voteTab(obj, id) {
                    $("#popupTab").find("a").removeClass("act");
                    $("#" + obj).addClass("act");
                    $("#voteWrap").find(".hidde").css("display", "none");
                    $("#" + id).css("display", "block");
                }
            </script>
            <!-- start 弹窗互动内容 -->
            <div class="vote-popup-wrap" id="voteWrap">
                <!-- start 投月票 -->
                <!-- EJS注释，如果作品是非VIP，看不到投月票的弹窗 -->

                <div class="popup-content month hidde" id="monthPopup" data-l2="1">
                    <div class="limit-wrap" style="display:none;">
                        <div class="null no-ticket"></div>
                        <h3>无投票资格</h3>
                        <!-- <h4><a class="blue" href="http://vip.qidian.com/My.php" target="_blank">提升会员等级</a>可获得投票资格</h4> -->
                        <h4>消费书币可获得月票</h4>
                        <p class="bottom"><a
                                href="http://wwwploy.qidian.com/HelpCenter/default.aspx?type=0&amp;categoryid=46&amp;parentid=21"
                                target="_blank">投月票规则</a></p>
                    </div>
                    <div class="no-limit-wrap" style="display: none">
                        <h3>剩余月票数<span>1</span>张<i>·</i>当前最多能投<span id="monthSurplus">1</span>张</h3>
                        <div class="vote-form-wrap">
                            <h4>投票数量</h4>
                            <div class="vote-wrap mb160 cf">

                                <a class="subtract disabled" id="subMonth" href="javascript:monthAlter('sub')"
                                   data-eid="qd_G110"><span></span></a>
                                <div class="ticket-num fl"> <span class="month-ticket" id="monthTicket">



                    <b></b></span><input id="monthNum" maxlength="3" value="1"></div>
                                <a class="add" id="addMonth" href="javascript:monthAlter('add')"
                                   data-eid="qd_G111"><span><em></em></span></a>
                            </div>
                            <script type="text/javascript">
                                $("#monthNum").change(function () {
                                    if($("#monthNum").val()>$("#monthPopup").find(".no-limit-wrap").find("h3").find("span").html()){
                                        $("#monthNum").val($("#monthPopup").find(".no-limit-wrap").find("h3").find("span").html());
                                    }
                                    var str="";
                                    for(var i=0;i<$("#monthNum").val();i++){
                                        str+="<b></b>";
                                    }
                                    $("#monthTicket").html(str);
                                })
                                function monthAlter(obj) {
                                    if(obj=="add"){
                                        $("#monthNum").val($("#monthNum").val()-1+2);
                                    }else{
                                        $("#monthNum").val($("#monthNum").val()-1);
                                    }
                                    $("#addMonth").removeClass("disabled");
                                    $("#subMonth").removeClass("disabled");
                                    if($("#monthNum").val()<=1){
                                        $("#subMonth").addClass("disabled");
                                    }
                                    if($("#monthNum").val()==$("#monthPopup").find(".no-limit-wrap").find("h3").find("span").html()){
                                        $("#addMonth").addClass("disabled");
                                    }
                                    if($("#monthNum").val()>$("#monthPopup").find(".no-limit-wrap").find("h3").find("span").html()){
                                        $("#monthNum").val($("#monthPopup").find(".no-limit-wrap").find("h3").find("span").html());
                                    }
                                    var str="";
                                    for(var i=0;i<$("#monthNum").val();i++){
                                        str+="<b></b>";
                                    }
                                    $("#monthTicket").html(str);
                                }
                            </script>
                            <!--<h4>留言鼓励</h4>
                            <div class="message-wrap">
                                <textarea id="recMsgText">这本书太棒了，犒劳一下，希望后续更加精彩！</textarea>
                            </div>-->
                        </div>
                        <div class="popup-btn">
                            <a class="red-btn" id="voteMonth" href="javascript:voteMonth()" data-eid="qd_G58">立即投票</a>
                        </div>
                    </div>
                    <div class="vote-complete">
                        <div class="complete-img month-img"></div>
                        <h3 class="mb50">已投出<span class="post-num"></span>张月票</h3>
                        <div class="popup-btn">
                            <a class="red-btn closeBtn" href="javascript:closePanel()" data-eid="">关闭</a>
                        </div>
                    </div>
                </div>

                <!-- end 投月票 -->
                <script type="text/javascript">
                    function voteMonth() {
                        $.ajax({
                            url:"/jpbook/vote/voteMonth",
                            data:{
                                "bookid":$("#bookid").val(),
                                "votenum":$("#monthNum").val()
                            },
                            success:function (data) {
                                $("#monthPopup > div").css("display","none");
                                $("#monthPopup").find(".vote-complete").css("display","block");
                                $("#monthPopup").find(".vote-complete > h3 > span").html($("#monthNum").val());

                            }
                        })

                    }
                    function monthClick() {
                        $.ajax({
                            url: "/jpbook/users/ckSession",
                            data: {"name": 'users'},
                            type: "post",
                            success: function (data) {
                                if (data == 0) {
                                    window.location.href = "/jpbook/login";
                                } else {
                                    $(".lbf-panel").css("display", "block");
                                    $(".lbf-overlay").css("display", "block");
                                    $.ajax({
                                        url: "/jpbook/wallet/getSurplusMonth",
                                        success: function (data) {
                                            $("#monthPopup > div").css("display", "none");
                                            if (data > 0) {
                                                $("#monthPopup").find(".no-limit-wrap").css("display", "block");
                                                $("#monthPopup").find(".no-limit-wrap").find("h3").find("span").html(data);
                                                if(data==1){
                                                    $("#addMonth").addClass("disabled");
                                                }
                                            } else {
                                                $("#monthPopup").find(".limit-wrap").css("display", "block");
                                            }
                                            $("#monthNum").val(1);
                                            voteTab('monthTab', 'monthPopup');
                                        }
                                    })
                                }
                            }
                        })

                    }
                </script>
                <!-- start 投推荐票 -->
                <div class="popup-content rec hidde" id="recPopup" data-l2="2" style="display: none;">
                    <!--投票-->
                    <div class="no-limit-wrap" style="display: none">
                        <h3>剩余推荐票数<span>1</span>张<i>·</i>当前最多能投<span id="recSurplus">1</span>张</h3>
                        <div class="vote-form-wrap">
                            <h4>投票数量</h4>
                            <div class="vote-wrap mb160 cf">

                                <a class="subtract disabled" id="subRec" href="javascript:recAlter('sub')" data-eid="qd_G110"><span></span></a>
                                <div class="ticket-num fl"> <span class="rec-ticket" id="recTicket">



                            <b></b></span><input id="recNum" maxlength="3" value="1"></div>
                                <a class="add" id="addRec" href="javascript:recAlter('add')"
                                   data-eid="qd_G111"><span><em></em></span></a>
                            </div>
                            <script type="text/javascript">
                                $("#recNum").change(function () {
                                    if($("#recNum").val()>$("#recPopup").find(".no-limit-wrap").find("h3").find("span").html()){
                                        $("#recNum").val($("#recPopup").find(".no-limit-wrap").find("h3").find("span").html());
                                    }
                                    var str="";
                                    for(var i=0;i<$("#recNum").val();i++){
                                        str+="<b></b>";
                                    }
                                    $("#recTicket").html(str);
                                })
                                function recAlter(obj) {
                                    if(obj=="add"){
                                        $("#recNum").val($("#recNum").val()-1+2);
                                    }else{
                                        $("#recNum").val($("#recNum").val()-1);
                                    }
                                    $("#addRec").removeClass("disabled");
                                    $("#subRec").removeClass("disabled");
                                    if($("#recNum").val()<=1){
                                        $("#subRec").addClass("disabled");
                                    }
                                    if($("#recNum").val()==$("#recPopup").find(".no-limit-wrap").find("h3").find("span").html()){
                                        $("#addRec").addClass("disabled");
                                    }
                                    if($("#recNum").val()>$("#recPopup").find(".no-limit-wrap").find("h3").find("span").html()){
                                        $("#recNum").val($("#recPopup").find(".no-limit-wrap").find("h3").find("span").html());
                                    }
                                    var str="";
                                    for(var i=0;i<$("#recNum").val();i++){
                                        str+="<b></b>";
                                    }
                                    $("#recTicket").html(str);
                                }
                                function voteRec() {
                                    $.ajax({
                                        url:"/jpbook/vote/voteRec",
                                        data:{
                                            "bookid":$("#bookid").val(),
                                            "votenum":$("#recNum").val()
                                        },
                                        success:function (data) {
                                            $("#recPopup > div").css("display","none");
                                            $("#recPopup").find(".vote-complete").css("display","block");
                                            $("#recPopup").find(".vote-complete > h3 > span").html($("#recNum").val());

                                        }
                                    })
                                }
                            </script>
                            <!--<h4>留言鼓励</h4>
                            <div class="message-wrap">
                                <textarea id="recMsgText">这本书太棒了，犒劳一下，希望后续更加精彩！</textarea>
                            </div>-->
                        </div>
                        <div class="popup-btn">
                            <a class="red-btn" id="voteRec" href="javascript:voteRec()" data-eid="qd_G58">立即投票</a>
                        </div>
                    </div>
                    <!-- start 无投票资格 -->
                    <div class="limit-wrap">
                        <div class="null no-ticket"></div>
                        <h3>无投票资格</h3>
                        <h4><a class="blue"
                               href="http://wwwploy.qidian.com/HelpCenter/default.aspx?type=0&amp;categoryid=114&amp;parentid=20"
                               target="_blank">增加经验值可获得投票资格</a></h4>
                        <p class="bottom"><a
                                href="http://wwwploy.qidian.com/HelpCenter/default.aspx?type=0&amp;categoryid=35&amp;parentid=20"
                                target="_blank">投推荐票规则</a></p>
                    </div>
                    <!-- end 无投票资格 -->

                    <!-- start 无投票资格 -->
                    <div class="limit-wrap hidde" id="noPrivilege">
                        <div class="null no-ticket"></div>
                        <h3>无投票资格</h3>
                        <h4><a class="blue"
                               href="http://wwwploy.qidian.com/HelpCenter/default.aspx?type=0&amp;categoryid=114&amp;parentid=20"
                               target="_blank">增加经验值可获得投票资格</a></h4>
                        <p class="bottom"><a
                                href="http://wwwploy.qidian.com/HelpCenter/default.aspx?type=0&amp;categoryid=35&amp;parentid=20"
                                target="_blank">投推荐票规则</a></p>
                    </div>
                    <!-- end 无投票资格 -->

                    <!-- start post后判断限额用完 -->
                    <div class="limit-wrap hidde" id="outOfRecLimit">
                        <div class="null no-ticket"></div>
                        <h3>今日<span></span>张限额已用完</h3>
                        <p class="bottom"><a
                                href="http://wwwploy.qidian.com/HelpCenter/default.aspx?type=0&amp;categoryid=35&amp;parentid=20"
                                target="_blank">投推荐票规则</a></p>
                    </div>
                    <!-- end post后判断限额用完 -->

                    <!-- start 投完推荐票显示的动态 -->
                    <div class="vote-complete">
                        <div class="complete-img rec-img"></div>
                        <h3 class="mb50">已投出<span class="post-num"></span>张推荐票</h3>
                        <div class="popup-btn">
                            <a class="red-btn closeBtn" href="javascript:closePanel()" data-eid="">关闭</a>
                        </div>
                    </div>
                    <!-- end 投完推荐票显示的动态 -->

                    <!-- start 通用错误 -->
                    <div class="limit-wrap hidde" id="commonError">
                        <div class="null no-ticket"></div>
                        <h3></h3>
                    </div>
                    <!-- end 通用错误 --></div>
                <!-- end 投推荐票 -->
                <script type="text/javascript">
                    function recClick() {
                        $.ajax({
                            url: "/jpbook/users/ckSession",
                            data: {"name": 'users'},
                            type: "post",
                            success: function (data) {
                                if (data == 0) {
                                    window.location.href = "/jpbook/login";
                                } else {
                                    $(".lbf-panel").css("display", "block");
                                    $(".lbf-overlay").css("display", "block");
                                    $.ajax({
                                        url: "/jpbook/wallet/getSurplusRec",
                                        success: function (data) {
                                            $("#recPopup > div").css("display", "none");
                                            if (data > 0) {
                                                $("#recPopup").find(".no-limit-wrap").css("display", "block");
                                                $("#recPopup").find(".no-limit-wrap").find("h3").find("span").html(data);
                                                if(data==1){
                                                    $("#addRec").addClass("disabled");
                                                }
                                            } else {
                                                $("#recPopup").find(".limit-wrap").css("display", "block");
                                            }
                                            $("#recNum").val(1);
                                            voteTab('recTab', 'recPopup');
                                        }
                                    })
                                }
                            }
                        })
                    }
                </script>

                <!-- EJS注释，如果作品是非签约作品，看不到投打赏的弹窗 -->

                <!-- start 打赏 -->
                <div class="popup-content reward hidde" id="rewardPopup" data-l2="3"><!-- start 有限制不可以打赏 余额不足 -->
                    <div class="limit-wrap hidde" id="noMoney">
                        <div class="null no-money"></div>
                        <h3>账户余额不足</h3>
                        <h4>本次打赏<em class="calcReward">500</em>起点币</h4>
                        <h5>账户余额 <span id="balance"></span> 起点币<i>·</i>还差<em class="f14" id="differ"></em>起点币</h5>
                        <p class="popup-btn"><a class="red-btn j_quickPay" href="javascript:"
                                                data-eid="qd_G61">快捷支付打赏</a><a class="blue-btn j_charge"
                                                                               href="javascript:" target="_blank"
                                                                               data-eid="qd_G62">去充值</a></p>
                    </div>
                    <!-- end 有限制不可以打赏 余额不足 -->

                    <!-- start 有限制不可以打赏 禁消费 -->
                    <div class="limit-wrap hidde" id="rewardBan">
                        <div class="null no-money"></div>
                        <h3>当前账户存在异常，暂时禁止消费，请联系 <a class="blue" href="http://kf.qidian.com/Default.aspx"
                                                   target="_blank">客服</a> 处理</h3>
                    </div>
                    <!-- end 有限制不可以打赏 禁消费 -->


                    <!-- start 无限制可以打赏 -->
                    <div class="no-limit-wrap">
                        <div class="vote-form-wrap">
                            <div class="reward-list cf" id="rewardList">
                                <ul>
                                    <li data-reward="100">
                                        <div class="price">
                                            <p class="lang">100点</p>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                    <li class="act" data-reward="500" id="defaultreward">
                                        <div class="price">
                                            <p class="lang">500点</p>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                    <li data-reward="1000">
                                        <div class="price">
                                            <p class="lang">1000点</p>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                    <li data-reward="2000">
                                        <div class="price">
                                            <p class="lang">2000点</p>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                    <li data-reward="10000">
                                        <div class="price">
                                            <p class="lang">1万点</p>
                                            <span class="">赠1张月票</span>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                    <li data-reward="50000">
                                        <div class="price">
                                            <p class="lang">5万点</p>
                                            <span class="">赠5张月票</span>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                    <li data-reward="100000">
                                        <div class="price">
                                            <p class="lang">10万点</p>
                                            <span class="">赠10张月票</span>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                    <li data-reward="1000000">
                                        <div class="price">
                                            <p class="lang">100万点</p>
                                            <span class="">赠100张月票</span>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                    <li data-reward="10000000">
                                        <div class="price">
                                            <p class="lang">1000万点</p>
                                            <span class="">赠1000张月票</span>
                                        </div>
                                        <i></i>
                                        <cite></cite>
                                    </li>
                                </ul>
                                <script type="text/javascript">
                                    $("#rewardList").find("li").click(function () {
                                        $(".calcReward").html($(this).attr("data-reward"));
                                        $("#rewardList").find("li").removeClass("act");
                                        $(this).addClass("act");
                                    })

                                    function rewardClick() {
                                        $.ajax({
                                            url: "/jpbook/users/ckSession",
                                            data: {"name": 'users'},
                                            type: "post",
                                            success: function (data) {
                                                if (data == 0) {
                                                    window.location.href = "/jpbook/login";
                                                } else {
                                                    $(".lbf-panel").css("display", "block");
                                                    $(".lbf-overlay").css("display", "block");
                                                    $.ajax({
                                                        url: "/jpbook/users/getNewMoney",
                                                        success: function (data) {
                                                            if (data > 0) {
                                                                $("#rewardPopup").find(".no-limit-wrap").find("h4 > em").html(data);
                                                            } else {
                                                                $("#rewardPopup").find(".no-limit-wrap").find("h4 > em").html(0);
                                                            }
                                                            $(".calcReward").html(500);
                                                            $("#rewardPopup").find(".no-limit-wrap").css("display","block");
                                                            voteTab('rewardTab', 'rewardPopup');
                                                        }
                                                    })
                                                }
                                            }
                                        })
                                    }

                                    function ckSession(name) {
                                        $.ajax({
                                            url: "/jpbook/users/ckSession",
                                            data: {"name": name},
                                            type: "post",
                                            success: function (data) {
                                                if (data == 0) {
                                                    window.location.href = "/jpbook/login";
                                                    return false;
                                                } else {
                                                    return true;
                                                }
                                            }
                                        })
                                    }
                                </script>
                            </div>
                            <h4>账户余额<em
                                    th:text="${session.users==null?0:session.users.get(0).getMoney()}"></em>起点币<i>·</i>本次打赏<em
                                    class="calcReward">500</em>起点币</h4>
                        </div>
                        <div class="popup-btn">
                            <a class="red-btn" id="voteReward" href="javascript:reward()" data-eid="qd_G59">确认打赏</a>
                        </div>
                    </div>
                    <!-- end 无限制可以打赏 -->

                    <!-- start 打赏后显示的动态 -->
                    <div class="vote-complete hidde">
                        <div class="complete-img reward-img"></div>
                        <h3>已打赏<span class="post-num"></span>起点币</h3>
                        <p><span class="gift"></span> 粉丝值 +<em class="fans-value"></em></p>
                        <div class="popup-btn">
                            <a class="red-btn closeBtn" href="javascript:closePanel()" data-eid="">关闭</a>
                        </div>

                    </div>
                    <!-- end 打赏后显示的动态 --></div>
                <!-- end 打赏 -->

                <script type="text/javascript">
                    function reward() {
                        $("#rewardPopup > .no-limit-wrap").css("display","none");
                        var money=$("#rewardPopup").find(".no-limit-wrap").find("h4 > em").html();
                        var reward=$(".calcReward").html();
                        $("#rewardList").find("li").removeClass("act");
                        $("#rewardList").find("#defaultreward").addClass("act");
                        if(parseInt(money)<parseInt(reward)){
                            $("#balance").html(parseInt(money));
                            $("#differ").html(parseInt(reward)-parseInt(money));
                            $("#noMoney").css("display","block");
                        }else{
                            $.ajax({
                                url:"/jpbook/reward/rewardNew",
                                data:{
                                    "bookid":$("#bookid").val(),
                                    "rewanum":reward
                                },
                                success:function (data) {
                                    $("#rewardPopup > .vote-complete").css("display","block");
                                    $("#rewardPopup > .vote-complete > h3 > span").html($(".calcReward").html());

                                }
                            })
                        }
                    }
                </script>
            </div>
        </div>
    </div>
    <div class="lbf-panel-foot" style="display: none;">
        <div class="lbf-panel-foot-l"></div>
        <div class="lbf-panel-foot-r"><a href="javascript:;"
                                         class="lbf-button lbf-button-primary lbf-button-default lbf-button-normal">确定</a><a
                href="javascript:;" class="lbf-button lbf-button-default lbf-button-normal">否定</a><a href="javascript:;"
                                                                                                     class="lbf-button lbf-button-default lbf-button-normal">取消</a>
        </div>
    </div>
</div>
<div class="lbf-overlay"
     style="display:none;background-color: black; opacity: 0.3; z-index: 62779; width: 1350px; height: 3256px;"></div>
<div class="lbf-panell" style="position:fixed;z-index: 62780; width: 520px; top: 158.5px; left: 413.5px;display: none;"><a href="javascript:closePanl();"
                                                                                                           class="lbf-panel-close lbf-icon lbf-icon-close"></a>
    <div class="lbf-panel-head" style="display: none;">提示</div>
    <div class="lbf-panel-body">
        <div class="book-popup subscribe-popup" id="subscribePopup" data-l1="15">
            <!-- start 标题 -->
            <div class="popup-title">
                <h3 class="lang">订阅</h3>
            </div>
            <div class="sub-content" data-l2="4">
                <div class="tip" style="text-align: center">
                    <h4>本次订阅将消耗<span class="current-price">1191</span>起点币</h4>
                    <p>当前余额为<em class="current-balance">90</em>起点币<i>·</i>还需支付<span class="diff">1101</span>起点币</p>
                    <div class="popup-btn">
                        <!--<a class="red-btn j_quickpay" href="javascript:" data-eid="qd_G92">快捷支付</a>-->
                        <a class="blue-btn j_charge" href="/jpbook/topup" data-eid="qd_G93" target="_blank">去充值</a>
                    </div>
                </div>
            </div>
            <!-- end 订阅提示信息 -->

        </div>
        <div class="book-popup subscribe-popup" id="enoughmoney" data-l1="15">
            <div class="popup-title">
                <h3 class="lang">订阅</h3>
            </div>
            <div class="sub-content" data-l2="4">
                <div class="tip">
                    <h4>本次订阅将消耗<span>10</span>起点币</h4>
                    <p>当前余额为<em>90</em>起点币</p>
                    <div class="popup-btn">
                        <a class="red-btn j_paynow" href="javascript:buyrecordChap()" data-eid="qd_G90">立即支付</a>
                    </div>
                </div>
            </div>
            <!-- end 订阅提示信息 -->

        </div>
    </div>
    <div class="lbf-panel-foot" style="display: none;">
        <div class="lbf-panel-foot-l"></div>
        <div class="lbf-panel-foot-r"><a href="javascript:;"
                                         class="lbf-button lbf-button-primary lbf-button-default lbf-button-normal">确定</a><a
                href="javascript:;" class="lbf-button lbf-button-default lbf-button-normal"
                style="display: none;">否定</a><a href="javascript:;"
                                                class="lbf-button lbf-button-default lbf-button-normal">取消</a></div>
    </div>
</div>
<div class="lbf-overlayy"
     style="background-color: black;position: fixed; opacity: 0.3; z-index: 62779; width: 100%; height: 100%;display: none;"></div>
<script type="text/javascript">
    function subbuyrecord(money,obj) {

        $(".j_paynow").prop("href",obj=="all"?"javascript:buyrecordAll()":"javascript:buyrecordChap()");

        $(".sub-content").find("span").html(money);
        $("#subscribePopup").css("display","none");
        $("#enoughmoney").css("display","none");
        $(".lbf-panell").css("display","block");
        $(".lbf-overlayy").css("display","block");
        $.ajax({
            url: "/jpbook/users/ckSession",
            data: {"name": 'users'},
            type: "post",
            success: function (data) {
                if (data == 0) {
                    window.location.href = "/jpbook/login";
                } else {
                    $.ajax({
                        url: "/jpbook/users/getNewMoney",
                        success: function (data) {
                            if (data > 0) {
                                $(".sub-content").find("em").html(data);
                            } else {
                                data=0;
                                $(".sub-content").find("em").html(data);
                            }
                            if(parseInt(money)-parseInt(data)>0){
                                $("#subscribePopup").css("display","block");
                                $(".diff").html(parseInt(money)-parseInt(data));
                            }else {
                                $("#enoughmoney").css("display","block");
                            }
                        }
                    })
                }
            }
        })
    }
    function buyrecordChap() {
        $.ajax({
            url: "/jpbook/buyrecord/buyrecordChap",
            data: {"chapid": $("#chapid").val(),"money":$(".sub-content").find("span").html()},
            success: function (data) {
                closePanl();
                window.location.reload();
            }, type: "post",
            traditional: true
        })
    }
    function buyrecordAll() {
        $.ajax({
            url: "/jpbook/buyrecord/getUnpurchasedGoodwillMethodByUuid",
            data: {"bookid": $("#bookid").val(),"money":$(".sub-content").find("span").html()},
            success: function (data) {
                closePanl();
                read($("#chapid").val());
            }, type: "post",
            traditional: true
        })
    }
    function closePanl() {
        $("#subscribePopup").css("display","none");
        $("#enoughmoney").css("display","none");
        $(".lbf-panell").css("display","none");
        $(".lbf-overlayy").css("display","none");
    }
</script>
<script>
    //全局的通用数据都放g_data变量里
    var g_data = {};
    //环境变量，会按照环境选择性打log
    g_data.envType = 'pro';
    //用作统计PV
    g_data.pageId = 'qd_P_read';
    //环境域名
    g_data.domainSearch = 'www.qidian.com/search';
    //阅读页配置参数
    g_data.readSetting = {
        "t" : 0,
        "ft" : 0,
        "fs" : 3,
        "w" : 1,
        "rt" : 0,
        "autoBuy" : 0
    };
    g_data.isPublication = false;
    g_data.salesMode = 1;
    //书信息
    g_data.bookInfo = {
        "bookId":1012730372,
        "bookName":'洪荒之神棍开山祖',
        "authorId":7322536,
        "authorName": '星之煌'
    };
    //非vip章节,背景广告

    g_data.bgOpsInfo = {"id":2330,"title":"","adCategoryName":"广告","colorType":0,"startTime":1552356000,"endTime":1552442400,"type":1,"isAdv":1,"abTest":[],"adType":1,"adImgUrl":"//qidian.qpic.cn/qidian_common/349573/148cca82a4edd8c4cf83e15e13a1633a/0","adJumpUrl":"http://cpgame.qd.game.qidian.com/Home/Index/directLogin/name/hyzj/way/1?qd_game_key=hyzj1920x1057jt&qd_dd_p1=2330","hasAd":1};

    //页面初始化章节信息
    g_data.chapter = {
        //页面进入加载的章节id
        id:421353404,
        //章节vip标识
        vipStatus : 0,
        //上一章id
        prevId : 433970504,
        //下一章id
        nextId :421507489,
        //本章节是否已经订阅
        isBuy: 0
    };
    g_data.pageOps = {"hasAd":0};
    //页面进入时,下一章是否是vip章节
    g_data.nextChapterVip = 0;
    //章节底部广告
    g_data.bottomOps = {"hasAd":0};
    //打赏参数
    g_data.pageJson = {
        // 是否是VIP书籍，传入js，在弹窗时需要判断，如果不是VIP看不到月票Tab
        isVip:1,
        // 是否是出版物
        isPublication: false,
        //是否已登录，传入js，EJS后加载模板判断是否显示
        isLogin:1,
        //是否签约作品，传入js，EJS后加载模板判断是否显示
        isSign:1,
        //是否要送月票 传入js， EJS后加载模板判断使用
        noRewardMonthTic:0,
        //获得bookId的json格式，传入js，EJS后加载模板中可以直接使用
        bookId:1012730372,
        //获得签约状态，传入js，EJS后加载弹窗下载使用
        signStatus:'Ａ级签约',
        //作家专区链接环境变量传入EJS模板
        mePreFix:'//me.qidian.com',
        //讨论区连接环境变量传入EJS模板
        forumPreFix:'//forum.qidian.com'
    };
    // 区分女生网 && 起点中文网
    g_data.isWebSiteType = 1;
</script>

<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

<script data-ignore="true" src="../css/LBF.js.下载"></script>



<script>
    var _mtac = {};
    (function() {
        var mta = document.createElement("script");
        mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.2";
        mta.setAttribute("name", "MTAH5");
        mta.setAttribute("sid", "500451537");
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(mta, s);
    })();
</script>
<script src="../js/jquery.js"></script>
<script src="../js/jquery.scrollToTop.min.js"></script>
<script type="text/javascript">
    $(function() {
        $("#toTop").scrollToTop(1000);
    });
</script>

<script type="text/javascript">
    $("body").keydown(function(e) {
        if(e.which==37){
            document.getElementById("j_chapterPrev").click();
        }else if(e.which==39){
            document.getElementById("j_chapterNext").click();
        }
    });
</script>

</body></html>